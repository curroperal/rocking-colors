{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let WorksService = /*#__PURE__*/(() => {\n  class WorksService {\n    constructor(http) {\n      this.http = http;\n      this.loading = true;\n      this.works = [];\n      this.worksFilter = [];\n      this.loadWorks();\n    }\n\n    loadWorks() {\n      return new Promise((resolve, reject) => {\n        this.http.get('https://rocking-colors-default-rtdb.europe-west1.firebasedatabase.app/works_idx.json').subscribe(res => {\n          console.log('SERVICE: ', res);\n          this.loading = false;\n          this.works = res;\n          resolve;\n        });\n      });\n    }\n\n    getWork(id) {\n      return this.http.get(`https://rocking-colors-default-rtdb.europe-west1.firebasedatabase.app/works/${id}.json`);\n    }\n\n    getNimg(id) {\n      return this.http.get(`https://rocking-colors-default-rtdb.europe-west1.firebasedatabase.app/works_idx/${id}.json`); //console.log('Probando Servicio -> ID: ', id);\n    }\n\n    buscarWork(termino) {\n      if (this.works.length === 0) {\n        this.loadWorks().then(() => {\n          // ejecutar después de tener los productos\n          // Aplicar filtro\n          this.filtrarWorks(termino);\n        });\n      } else {\n        // Aplicar filtro\n        this.filtrarWorks(termino);\n      }\n    }\n\n    filtrarWorks(termino) {\n      this.worksFilter = [];\n      termino = termino.toLocaleLowerCase();\n      console.log('HEY TERMINO', termino);\n      this.works.forEach(w => {\n        var _a, _b;\n\n        const tituloLower = (_a = w.titulo) === null || _a === void 0 ? void 0 : _a.toLocaleLowerCase();\n        const categoriaLower = (_b = w.categoria) === null || _b === void 0 ? void 0 : _b.toLocaleLowerCase();\n\n        if (categoriaLower.indexOf(termino) >= 0 || tituloLower.indexOf(termino) >= 0) {\n          this.worksFilter.push(w);\n        }\n      });\n    }\n\n  }\n\n  WorksService.ɵfac = function WorksService_Factory(t) {\n    return new (t || WorksService)(i0.ɵɵinject(i1.HttpClient));\n  };\n\n  WorksService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: WorksService,\n    factory: WorksService.ɵfac,\n    providedIn: 'root'\n  });\n  return WorksService;\n})();","map":null,"metadata":{},"sourceType":"module"}